---
import { getCollection } from 'astro:content';

import Asterism from '@/icons/asterism.svg';
import Layout from '@/layouts/Layout.astro';

import '@/styles/home.css';

const posts = await getCollection('blog').then((response) =>
    response.sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
);
---

<Layout title="Home" bodyClass="home-page" wrapperClass="wrapper--home">
    <header></header>
    <h1 class="title">
        <Asterism class="asterism" />
        Hi! I&rsquo;m <strong>Doug Stewart</strong>, a <strong>software developer</strong> living in
        <strong>San Francisco, CA</strong> with two years of team leadership and over 15 years&rsquo;
        experience making beautiful websites.
    </h1>
    <section class="socials">
        <p>
            You can find me on <a
                class="nifty-link"
                data-company="codesandbox"
                href="https://codesandbox.io/u/doug-stewart">CodeSandbox.io</a
            > and <a class="nifty-link" data-company="github" href="https://github.com/doug-stewart"
                >GitHub</a
            >. If you want to connect I&rsquo;m on <a
                class="nifty-link"
                data-company="linkedin"
                href="https://www.linkedin.com/in/dougmstewart/">LinkedIn</a
            > or just <a href="/contact">email me</a>.
        </p>
    </section>
    <section class="work">
        <p>
            I&rsquo;ve worked for <a
                class="nifty-link"
                data-company="krafton"
                href="https://www.krafton.com/">Krafton Americas</a
            >, <a class="nifty-link" data-company="imvu" href="https://www.togetherlabs.com/"
                >Together Labs</a
            >, <a class="nifty-link" data-company="kongregate" href="https://www.kongregate.com/"
                >Kongregate</a
            >, and <a
                class="nifty-link"
                data-company="tag"
                href="https://www.linkedin.com/company/tag-new-media/about/">Tag New Media</a
            >; and I&rsquo;ve worked with amazing brands like <a
                class="nifty-link"
                data-company="ancile"
                href="https://www.uperform.com/">ANCILE Solutions</a
            >, <a class="nifty-link" data-company="keurig" href="https://www.keurig.com/">Keurig</a
            >, <a class="nifty-link" data-company="gillette" href="https://www.gillette.com/"
                >Gillette</a
            >, <a class="nifty-link" data-company="rossignol" href="https://www.rossignol.com/"
                >Rossignol</a
            >, and so many others.
        </p>
    </section>
    <section class="blog">
        <h2>Sometimes <a href="/blog">I write</a> ↴</h2>
        <ol>
            {
                posts.map((post) => (
                    <li>
                        <a href={`/blog/${post.slug}`}>{post.data.title}</a>
                    </li>
                ))
            }
        </ol>
        <p><a href="/blog">There&rsquo;s more →</a></p>
    </section>
    <section class="hobbies">
        <p>
            When I&rsquo;m not doing the code monkey thing I ride my motorcycle and do some casual
            photography.
        </p>
    </section>
    <div class="color-overlay"></div>
</Layout>

<script is:inline>
    const links = document.querySelectorAll('.nifty-link');
    const overlay = document.querySelector('.color-overlay');

    for (const link of links) {
        link.addEventListener('mouseenter', () => {
            const offsets = link.getBoundingClientRect();
            const classes = document.querySelector('.color-overlay').classList;
            const themes = Array.from(classes).filter((cl) => cl.includes('theme'));

            overlay.classList.remove(...themes);
            overlay.classList.add(`theme-${link.dataset.company}`, 'is-visible');
        });
        link.addEventListener('mouseleave', () => overlay.classList.remove('is-visible'));
    }
</script>
